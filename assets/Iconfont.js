let e=document.createElement("style");e.innerHTML=".preview-modal{position:fixed;top:0;left:0;bottom:0;right:0;background-color:rgba(0,0,0,.4);z-index:1000;display:flex;align-items:center;justify-content:center;user-select:none}.preview-modal .close-icon{position:absolute;right:10px;top:10px;z-index:2000;font-size:32px;color:#fff}.preview-content{position:relative;display:flex;align-items:center;justify-content:center;box-shadow:0 0 4px 0 rgba(0,0,0,.05)}.preview-content img,.preview-content video{max-width:100%;max-height:100%;outline:0}.preview-content .img-scale-mask{opacity:0;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);transition:opacity 80ms;color:#fff;padding:8px 22px;text-align:center;border-radius:12px;background-color:rgba(0,0,0,.6);user-select:none}.preview-content .img-scale-mask.active{opacity:1}.toolbar{position:absolute;bottom:10%;left:50%;transform:translateX(-50%);font-size:26px;padding:4px 30px;border-radius:30px;display:flex;align-items:center;background-color:rgba(109,109,109,.6);box-shadow:0 1px 5px 0 rgba(0,0,0,.08)}.toolbar>.anticon{padding:3px 8px;cursor:pointer;color:#fff}.toolbar>.anticon:hover{transform:scale(1.06)}.image-demo[data-v-960d9a54]{width:600px;height:400px;margin-bottom:12px}",document.head.appendChild(e);import{c as t,x as n,I as i,d as o,aT as a,r,X as l,a7 as c,t as s,a3 as u,y as m,z as d,ag as p,S as g,a6 as f,Q as v,aG as b,G as y,H as h,F as O,O as w}from"./index.js";import{A as x}from"./index6.js";import{I as j}from"./icon-font.js";var S={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M685.4 354.8c0-4.4-3.6-8-8-8l-66 .3L512 465.6l-99.3-118.4-66.1-.3c-4.4 0-8 3.5-8 8 0 1.9.7 3.7 1.9 5.2l130.1 155L340.5 670a8.32 8.32 0 00-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3L512 564.4l99.3 118.4 66 .3c4.4 0 8-3.5 8-8 0-1.9-.7-3.7-1.9-5.2L553.5 515l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z"}},{tag:"path",attrs:{d:"M512 65C264.6 65 64 265.6 64 513s200.6 448 448 448 448-200.6 448-448S759.4 65 512 65zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"close-circle",theme:"outlined"};function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var z=function(e,o){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){k(e,t,n[t])}))}return e}({},e,o.attrs);return t(i,n(a,{icon:S}),null)};z.displayName="CloseCircleOutlined",z.inheritAttrs=!1;var P={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"};function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=function(e,o){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){C(e,t,n[t])}))}return e}({},e,o.attrs);return t(i,n(a,{icon:P}),null)};I.displayName="DownloadOutlined",I.inheritAttrs=!1;var L={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M316 672h60c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8zm196-50c22.1 0 40-17.9 40-39 0-23.1-17.9-41-40-41s-40 17.9-40 41c0 21.1 17.9 39 40 39zm0-140c22.1 0 40-17.9 40-39 0-23.1-17.9-41-40-41s-40 17.9-40 41c0 21.1 17.9 39 40 39z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}},{tag:"path",attrs:{d:"M648 672h60c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8z"}}]},name:"one-to-one",theme:"outlined"};function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var V=function(e,o){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){M(e,t,n[t])}))}return e}({},e,o.attrs);return t(i,n(a,{icon:L}),null)};V.displayName="OneToOneOutlined",V.inheritAttrs=!1;var U={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"};function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=function(e,o){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){H(e,t,n[t])}))}return e}({},e,o.attrs);return t(i,n(a,{icon:U}),null)};E.displayName="RedoOutlined",E.inheritAttrs=!1;var D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-in",theme:"outlined"};function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=function(e,o){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){N(e,t,n[t])}))}return e}({},e,o.attrs);return t(i,n(a,{icon:D}),null)};_.displayName="ZoomInOutlined",_.inheritAttrs=!1;var A={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-out",theme:"outlined"};function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T=function(e,o){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){B(e,t,n[t])}))}return e}({},e,o.attrs);return t(i,n(a,{icon:A}),null)};T.displayName="ZoomOutOutlined",T.inheritAttrs=!1;var R=o({name:"preview-modal",emits:["update:visible"],components:{ZoomInOutlined:_,ZoomOutOutlined:T,RedoOutlined:E,DownloadOutlined:I,CloseCircleOutlined:z,OneToOneOutlined:V,[a.name]:a},props:{visible:{type:Boolean,default:!1},type:{type:String,default:"image"},url:{type:String,default:""}},setup(e,{emit:t}){const n=r(null);let i;const o=l({timer:null,loading:!1,rotateDeg:0,imgScale:1,scaleCV:.07,initWidth:0,initHeight:0,contentStyle:{width:"60vw",height:"60vh"},imgStyle:{width:"",height:"",transform:"rotate(0)"}}),a=c({get:()=>e.visible,set:e=>t("update:visible",e)}),u=(e="scale")=>{console.log(o.imgScale),o.imgStyle.width=o.initWidth*o.imgScale+"px",o.imgStyle.height=o.initHeight*o.imgScale+"px","init"===e?(o.imgStyle.maxWidth="",o.imgStyle.maxHeight=""):(o.imgStyle.maxWidth="none!important",o.imgStyle.maxHeight="none!important"),clearTimeout(i),i=setTimeout((()=>n.value.classList.remove("active")),1400),n.value.classList.add("active"),o.contentStyle={}};return{...s(o),imgScaleMask:n,isVisible:a,rotateImg:()=>{o.rotateDeg-=90,o.imgStyle.transform=`rotate(${o.rotateDeg}deg)`},saveImg:e=>{const t=new Blob([""],{type:"application/octet-stream"}),n=URL.createObjectURL(t),i=document.createElement("a");i.href=e,i.download=e.replace(/(.*\/)*([^.]+.*)/gi,"$2").split("?")[0];const o=document.createEvent("MouseEvents");o.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),i.dispatchEvent(o),URL.revokeObjectURL(n)},zoomInImg:()=>{o.imgScale+=o.scaleCV,u()},zoomOutImg:()=>{o.imgScale-=o.scaleCV,u()},handZoom:u,imgLoaded:e=>{if(e.currentTarget?.complete){const{width:t,height:n}=getComputedStyle(e.currentTarget);o.imgStyle.width=t,o.imgStyle.height=n,o.initWidth=parseFloat(t),o.initHeight=parseFloat(n),console.log(o.imgStyle,"图片加载完毕")}},resetImg:()=>{o.imgScale=1,u()}}}});const W={key:0,class:"toolbar"};R.render=function(e,n,i,o,a,r){const l=u("close-circle-outlined"),c=u("a-spin"),s=u("zoom-in-outlined"),y=u("zoom-out-outlined"),h=u("one-to-one-outlined"),O=u("redo-outlined"),w=u("download-outlined");return m(),d(b,{to:"body"},[e.isVisible?(m(),d("div",{key:0,onClick:n[6]||(n[6]=p((t=>e.isVisible=!1),["self"])),class:"preview-modal"},[t(l,{onClick:n[1]||(n[1]=t=>e.isVisible=!1),class:"close-icon"}),t("div",{class:"preview-content",style:e.contentStyle},[t(c,{spinning:e.loading},{default:g((()=>["image"===e.type?(m(),d("img",{key:0,onLoad:n[2]||(n[2]=p(((...t)=>e.imgLoaded(...t)),["stop"])),ref:"img",style:e.imgStyle,src:e.url,alt:""},null,44,["src"])):f("v-if",!0),"video"===e.type?(m(),d("video",{key:1,ref:"video",onCanplay:n[3]||(n[3]=t=>e.loading=!1),onLoadstart:n[4]||(n[4]=t=>e.loading=!0),src:e.url,controls:"",autoplay:""},null,40,["src"])):f("v-if",!0),t("div",{ref:"imgScaleMask",class:"img-scale-mask"},v(~~(100*e.imgScale)+"%"),513)])),_:1},8,["spinning"])],4),"image"===e.type?(m(),d("div",W,[t(s,{onClick:e.zoomInImg,title:"放大"},null,8,["onClick"]),t(y,{onClick:e.zoomOutImg,title:"缩放"},null,8,["onClick"]),t(h,{onClick:e.resetImg,title:"原始比例"},null,8,["onClick"]),t(O,{onClick:e.rotateImg,title:"旋转"},null,8,["onClick"]),t(w,{onClick:n[5]||(n[5]=t=>e.saveImg(e.url)),title:"下载"})])):f("v-if",!0)])):f("v-if",!0)])};var Z=o({name:"custom-modal",components:{[x.name]:x,IconFont:j,PreviewModal:R},setup(){const e=l({scriptUrl:"",iconName:"",visible:!1,imageUrl:""});return{...s(e),showPreview:t=>{e.imageUrl=t.target.currentSrc,e.visible=!0}}}});const F=O("data-v-960d9a54");y("data-v-960d9a54");const G=w(" 示意图："),X=w(" (例如：//at.alicdn.com/t/font_1166867_7zdsgx6x88l.js) "),$=w(" （例如：icon-huanfu1、icon-zhutipifu、icon-xinwendongtai1） "),q={key:1};h();const Q=F(((e,n,i,o,a,r)=>{const l=u("a-alert"),c=u("preview-modal"),s=u("a-input"),p=u("a-form-item"),g=u("icon-font"),v=u("a-form"),b=u("a-card");return m(),d("div",null,[t(l,{message:"自定义图标",description:"使用阿里图标库，可以有效减小项目的体积，支持离线本地图标和在线图标",type:"info","show-icon":"",style:{"margin-bottom":"12px"}}),t(b,null,{default:F((()=>[G,t("img",{onClick:n[1]||(n[1]=(...t)=>e.showPreview(...t)),class:"image-demo",src:"http://ww1.sinaimg.cn/large/005IOlAWgy1gl8bm4ot9dj314r0opabq.jpg"}),e.visible?(m(),d(c,{key:0,type:"image",visible:e.visible,"onUpdate:visible":n[2]||(n[2]=t=>e.visible=t),url:e.imageUrl},null,8,["visible","url"])):f("v-if",!0),t(v,null,{default:F((()=>[t(p,{label:"阿里图标路径"},{default:F((()=>[t(s,{value:e.scriptUrl,"onUpdate:value":n[3]||(n[3]=t=>e.scriptUrl=t),style:{width:"400px"},placeholder:"请输入你的阿里巴巴矢量图标库项目图标的路径"},null,8,["value"]),X])),_:1}),t(p,{label:"图标名字"},{default:F((()=>[t(s,{value:e.iconName,"onUpdate:value":n[4]||(n[4]=t=>e.iconName=t),placeholder:"请输入图标的名字",style:{width:"200px"}},null,8,["value"]),$])),_:1}),t(p,{label:"效果"},{default:F((()=>[e.scriptUrl&&e.iconName?(m(),d(g,{key:0,"script-url":e.scriptUrl,type:e.iconName,size:"30"},null,8,["script-url","type"])):(m(),d("span",q,"可以复制示例的地址和图标查看效果"))])),_:1})])),_:1})])),_:1})])}));Z.render=Q,Z.__scopeId="data-v-960d9a54";export default Z;
