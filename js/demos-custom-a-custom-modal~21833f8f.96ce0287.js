(window.webpackJsonp=window.webpackJsonp||[]).push([["demos-custom-a-custom-modal~21833f8f"],{1175:function(e,t,o){"use strict";o("ea5f")},"2f30":function(e,t,o){"use strict";o.r(t);var l=o("7a23"),n=Object(l.withScopeId)("data-v-a0c05a5c");Object(l.pushScopeId)("data-v-a0c05a5c");var c=Object(l.createTextVNode)("弹出弹窗");Object(l.popScopeId)();var a=n((function(e,t,o,a,i,r){var u=Object(l.resolveComponent)("a-alert"),s=Object(l.resolveComponent)("a-button"),d=Object(l.resolveComponent)("a-card"),f=Object(l.resolveComponent)("a-custom-modal");return Object(l.openBlock)(),Object(l.createBlock)("div",null,[Object(l.createVNode)(u,{message:"自定义模态框",description:"沿用ant-design-vue的modal样式，自定义一个可拖拽、可调整大小的模态框",type:"info","show-icon":""}),Object(l.createVNode)(d,null,{default:n((function(){return[Object(l.createVNode)(s,{onClick:t[1]||(t[1]=function(t){return e.visible=!0}),type:"primary"},{default:n((function(){return[c]})),_:1})]})),_:1}),Object(l.createVNode)(f,{visible:e.visible,"onUpdate:visible":t[2]||(t[2]=function(t){return e.visible=t})},null,8,["visible"])])})),i=(o("b0c0"),o("5530")),r=o("ade3"),u=o("2c92"),s=o("cdeb"),d={ref:"modalRootRef",class:"ant-modal-root custom-modal"},f=Object(l.createVNode)("div",{class:"ant-modal-mask"},null,-1),v={class:"ant-modal-wrap"},m={ref:"dragRef",class:"ant-modal"},b={class:"ant-modal-content"},j={ref:"titleRef",class:"ant-modal-header"},O=Object(l.createVNode)("span",{class:"ant-modal-title"},"这是一个可以拖动的窗口",-1),p={class:"ant-modal-operate"},h={ref:"minRef",type:"button",class:"min",title:"最小化"},y={ref:"maxRef",type:"button",class:"max",title:"最大化"},N={ref:"revertRef",type:"button",class:"revert",title:"还原"},V={ref:"resizeLRef",class:"resizeL"},R={ref:"resizeTRef",class:"resizeT"},w={ref:"resizeRRef",class:"resizeR"},z={ref:"resizeBRef",class:"resizeB"},x={ref:"resizeLTRef",class:"resizeLT"},g={ref:"resizeTRRef",class:"resizeTR"},L={ref:"resizeBRRef",class:"resizeBR"},T={ref:"resizeLBRef",class:"resizeLB"},k={ref:"modalBody",class:"ant-modal-body"},C=Object(l.createTextVNode)(" ① 窗口可以拖动；"),E=Object(l.createVNode)("br",null,null,-1),B=Object(l.createTextVNode)(" ② 窗口可以通过八个方向改变大小；"),H=Object(l.createVNode)("br",null,null,-1),W=Object(l.createTextVNode)(" ③ 窗口可以最小化、最大化、还原、关闭；"),S=Object(l.createVNode)("br",null,null,-1),M=Object(l.createTextVNode)(" ④ 限制窗口最小宽度/高度。 "),_={ref:"modalFooter",class:"ant-modal-footer"},I=Object(l.createTextVNode)("取 消"),X=Object(l.createTextVNode)("确 认"),Y=Object(l.defineComponent)({name:"a-custom-modal",emits:["update:visible"],props:{visible:{type:Boolean,default:!1}},setup:function(e,t){var o,n,c,a,i,r=t.emit,u=(t.attrs,Object(l.ref)(null)),s=Object(l.ref)(null),d=Object(l.ref)(null),f=Object(l.ref)(null),v=Object(l.ref)(null),m=Object(l.ref)(null),b=Object(l.ref)(null),j=Object(l.ref)(null),O=Object(l.ref)(null),p=Object(l.ref)(null),h=Object(l.ref)(null),y=Object(l.ref)(null),N=Object(l.ref)(null),V=Object(l.ref)(null),R=Object(l.ref)(null),w=0;function z(e,t,o,l,n,c){t.onmousedown=function(a){var r=a.clientX-t.offsetLeft,u=a.clientY-t.offsetTop,d=e.offsetTop,f=e.offsetLeft,v=e.offsetWidth,m=e.offsetHeight,b=function(a){var b=a.clientX-r,j=a.clientY-u,O=document.documentElement.clientWidth-e.offsetLeft-2,p=document.documentElement.clientHeight-e.offsetTop-2,h=o?v-b:t.offsetWidth+b,y=l?m-j:t.offsetHeight+j;return o&&(e.style.left=f+b+"px"),l&&(e.style.top=d+j+"px"),h<400&&(h=400),h>O&&(h=O),n||(s.value.style.width=h+"px"),y<140&&(y=140),y>p&&(y=p),c||(s.value.style.height=y-w-i+"px"),(o&&400==h||l&&140==y)&&(document.onmousemove=null),(o||l)&&(document.onmousemove=null),!1};return document.addEventListener("mousemove",b),document.addEventListener("mouseup",(function e(){document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",e)})),!1}}var x=function(){var e,t,l;e=u.value,t=f.value,l=0,(t=t||e).style.cursor="move",t.onmousedown=function(t){t=t||window.event,l=t.clientX-e.offsetLeft;var o=t.clientY-e.offsetTop,n=function(t){var n=t.clientX-l,c=t.clientY-o,a=document.documentElement.clientWidth-e.offsetWidth,i=document.documentElement.clientHeight-e.offsetHeight;return n<=0&&(n=0),c<=0&&(c=0),n>=a&&(n=a),c>=i&&(c=i),e.style.left=n+"px",e.style.top=c+"px",!1};return document.addEventListener("mousemove",n),document.addEventListener("mouseup",(function e(){document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",e)})),!1},V.value.onclick=function(){var t=getComputedStyle(e),l=t.left,r=t.top,u=getComputedStyle(s.value),d=u.width,f=u.height;o=d,n=f,c=l,a=r,e.style.top=e.style.left=0,e.style.width=document.documentElement.clientWidth-2+"px",e.style.height=document.documentElement.clientHeight-2+"px",s.value.style.width=e.style.width,s.value.style.height=parseFloat(e.style.height)-i-w+"px",this.style.display="none",R.value.style.display="block"},R.value.onclick=function(){s.value.style.height=n,s.value.style.width=o,e.style.width=e.style.height="unset",e.style.left=c,e.style.top=a,this.style.display="none",V.value.style.display="block"},z(u.value,O.value,!0,!0,!1,!1),z(u.value,p.value,!1,!0,!1,!1),z(u.value,h.value,!1,!1,!1,!1),z(u.value,y.value,!0,!1,!1,!1),z(u.value,v.value,!0,!1,!1,!0),z(u.value,m.value,!1,!0,!0,!1),z(u.value,b.value,!1,!1,!1,!0),z(u.value,j.value,!1,!1,!0,!1),u.value.style.left=(document.documentElement.clientWidth-u.value.offsetWidth)/2+"px",u.value.style.top=(document.documentElement.clientHeight-u.value.offsetHeight)/2+"px"};return Object(l.onMounted)((function(){Object(l.watch)((function(){return e.visible}),(function(e){e&&Object(l.nextTick)((function(){var e,t;i=null===(e=f.value)||void 0===e?void 0:e.offsetHeight,w=null===(t=d.value)||void 0===t?void 0:t.offsetHeight,x(),window.addEventListener("resize",x)}))}),{immediate:!0})})),Object(l.onBeforeUnmount)((function(){window.removeEventListener("resize",x)})),{dragRef:u,modalBody:s,modalFooter:d,titleRef:f,resizeLRef:v,resizeTRef:m,resizeRRef:b,resizeBRef:j,resizeLTRef:O,resizeTRRef:p,resizeBRRef:h,resizeLBRef:y,minRef:N,maxRef:V,revertRef:R,closeModal:function(){r("update:visible",!1)}}}});o("1175"),Y.render=function(e,t,o,n,c,a){var i=Object(l.resolveComponent)("a-button");return Object(l.openBlock)(),Object(l.createBlock)(l.Teleport,{to:"body"},[Object(l.withDirectives)(Object(l.createVNode)("div",d,[f,Object(l.createVNode)("div",v,[Object(l.createVNode)("div",m,[Object(l.createVNode)("div",b,[Object(l.createVNode)("div",j,[O,Object(l.createVNode)("div",p,[Object(l.createVNode)("button",h,null,512),Object(l.createVNode)("button",y,null,512),Object(l.createVNode)("button",N,null,512),Object(l.createVNode)("button",{onClick:t[1]||(t[1]=function(){return e.closeModal.apply(e,arguments)}),type:"button",class:"close",title:"关闭"})])],512),Object(l.createVNode)("div",V,null,512),Object(l.createVNode)("div",R,null,512),Object(l.createVNode)("div",w,null,512),Object(l.createVNode)("div",z,null,512),Object(l.createVNode)("div",x,null,512),Object(l.createVNode)("div",g,null,512),Object(l.createVNode)("div",L,null,512),Object(l.createVNode)("div",T,null,512),Object(l.createVNode)("div",k,[Object(l.renderSlot)(e.$slots,"default",{},(function(){return[C,E,B,H,W,S,M]}))],512),Object(l.createVNode)("div",_,[Object(l.createVNode)("div",null,[Object(l.createVNode)(i,{onClick:e.closeModal},{default:Object(l.withCtx)((function(){return[I]})),_:1},8,["onClick"]),Object(l.createVNode)(i,{onClick:e.closeModal,type:"primary"},{default:Object(l.withCtx)((function(){return[X]})),_:1},8,["onClick"])])],512)])],512)])],512),[[l.vShow,e.visible]])])};var F,J=Y,U=Object(l.defineComponent)({name:"custom-modal",components:(F={},Object(r.a)(F,u.a.name,u.a),Object(r.a)(F,s.a.name,s.a),Object(r.a)(F,"ACustomModal",J),F),setup:function(){var e=Object(l.reactive)({visible:!1});return Object(i.a)({},Object(l.toRefs)(e))}});U.render=a,U.__scopeId="data-v-a0c05a5c",t.default=U},ea5f:function(e,t,o){}}]);